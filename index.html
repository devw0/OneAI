<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OneAI</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Manrope:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0c0f;
    --bg2:#07080b;
    --panel:rgba(255,255,255,.04);
    --panel2:rgba(255,255,255,.06);
    --border:rgba(255,255,255,.12);
    --border2:rgba(255,255,255,.09);
    --text:#f3f4f6;
    --muted:rgba(255,255,255,.58);
    --muted2:rgba(255,255,255,.40);
    --hover:rgba(255,255,255,.07);
    --shadow: 0 20px 60px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:radial-gradient(1200px 700px at 50% 0%, rgba(255,255,255,.06), transparent 60%),
               linear-gradient(180deg, var(--bg), var(--bg2));
    color:var(--text);
    font-family: Inter, Manrope, "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
    letter-spacing:-0.01em;
  }

  header{
    height:72px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:sticky;
    top:0;
    z-index:10;
    border-bottom:1px solid var(--border2);
    backdrop-filter: blur(10px);
    background:rgba(11,12,15,.72);
  }
  .brand{
    position:absolute;
    left:18px;
    display:flex;
    gap:10px;
    align-items:center;
    font-weight:600;
    opacity:.9;
  }
  .brandDot{
    width:10px;height:10px;border-radius:999px;
    background:rgba(255,255,255,.35);
    border:1px solid var(--border);
  }

  .modelBtn{
    background:var(--panel2);
    border:1px solid var(--border);
    color:var(--text);
    border-radius:16px;
    padding:10px 14px;
    font-size:14px;
    font-weight:400;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    gap:10px;
    justify-content:center;
    width:auto;
  }
  .modelBtn:hover{ background:rgba(255,255,255,.09); }
  .chev{opacity:.65}

  main{
    height:calc(100vh - 72px);
    display:grid;
    grid-template-columns: 300px 1fr;
  }

  aside{
    border-right:1px solid var(--border2);
    background:rgba(15,16,20,.35);
    display:flex;
    flex-direction:column;
    padding:16px;
    gap:12px;
    position:relative;
  }
  .sideTitle{
    font-size:13px;
    font-weight:500;
    color:var(--muted);
    letter-spacing:.02em;
    display:flex;
    align-items:center;
    justify-content:space-between;
  }
  .newChat{
    border:1px solid var(--border);
    background:var(--panel2);
    color:var(--text);
    border-radius:12px;
    padding:10px 12px;
    cursor:pointer;
    font-weight:600;
    font-size:13px;
  }
  .newChat:hover{ background:rgba(255,255,255,.09); }

  .chatList{
    flex:1;
    overflow:auto;
    padding-right:4px;
    padding-bottom:92px;
  }
  .chatItem{
    padding:10px 12px;
    border-radius:12px;
    cursor:pointer;
    color:rgba(255,255,255,.80);
    border:1px solid transparent;
    margin-bottom:8px;
    background:transparent;
  }
  .chatItem:hover{ background:var(--hover); border-color:rgba(255,255,255,.06); }
  .chatItem.active{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.12); }

  .accountBox{
    position:absolute;
    left:16px;
    right:16px;
    bottom:16px;
    border-top:1px solid rgba(255,255,255,.08);
    padding-top:12px;
    display:flex;
    gap:12px;
    align-items:flex-start;
    justify-content:space-between;
  }
  .avatar{
    width:44px;height:44px;
    border-radius:999px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.12);
    display:flex;
    align-items:center;
    justify-content:center;
    flex:0 0 auto;
  }
  .avatar svg{ opacity:.8 }
  .accountLeft{
    display:flex;
    gap:10px;
    align-items:center;
    min-width:0;
  }
  .accountText{
    display:flex;
    flex-direction:column;
    gap:2px;
    min-width:0;
  }
  .accountName{
    font-size:13px;
    color:rgba(255,255,255,.90);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width:160px;
  }
  .accountBalance{
    font-size:12px;
    color:var(--muted);
  }
  .authBtns{
    display:flex;
    gap:8px;
    align-items:center;
  }
  .btnWhite{
    background:#ffffff;
    color:#0b0c0f;
    border:1px solid rgba(0,0,0,.08);
    border-radius:12px;
    padding:8px 10px;
    font-size:12px;
    font-weight:600;
    cursor:pointer;
  }
  .btnGray{
    background:var(--panel2);
    color:rgba(255,255,255,.85);
    border:1px solid rgba(255,255,255,.12);
    border-radius:12px;
    padding:8px 10px;
    font-size:12px;
    font-weight:600;
    cursor:pointer;
  }
  .btnGray:hover{ background:rgba(255,255,255,.09); }
  .btnWhite:hover{ filter:brightness(.96); }

  section{
    padding:22px 26px 18px 26px;
    display:flex;
    flex-direction:column;
    gap:16px;
  }
  .hero{
    padding:18px 18px;
    border:1px solid rgba(255,255,255,.10);
    border-radius:18px;
    background:rgba(255,255,255,.03);
  }
  .hero h1{
    margin:0 0 6px 0;
    font-size:26px;
    font-weight:600;
  }
  .hero p{
    margin:0;
    color:var(--muted);
    font-size:14px;
    line-height:1.45;
  }

  .grid{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap:14px;
  }
  .card{
    border:1px solid rgba(255,255,255,.10);
    border-radius:18px;
    background:rgba(255,255,255,.03);
    padding:16px;
    min-height:84px;
  }
  .card b{ font-size:15px; font-weight:600; }
  .card small{ display:block; margin-top:6px; color:var(--muted); }

  .composerWrap{
    margin-top:auto;
    display:flex;
    justify-content:center;
    padding-top:8px;
  }
  .composer{
    width:min(980px, 100%);
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);
    border-radius:22px;
    padding:14px;
    position:relative;
  }
  .composerInner{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .composerTop{
    display:flex;
    gap:12px;
    align-items:flex-start;
  }
  .gridIcon{
    width:28px;height:28px;
    border-radius:10px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
    flex:0 0 auto;
    margin-top:2px;
  }
  .gridIcon svg{ opacity:.7 }
  .prompt{
    flex:1;
    min-height:38px;
    display:flex;
    align-items:flex-start;
  }
  .prompt input{
    width:100%;
    background:transparent;
    border:none;
    outline:none;
    color:var(--text);
    font-size:14px;
    padding:6px 2px;
  }
  .prompt input::placeholder{ color:rgba(255,255,255,.45); }

  .composerBottom{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }

  .leftAttach{
    width:36px;height:36px;
    border-radius:14px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    cursor:pointer;
  }
  .leftAttach svg{ opacity:.65 }

  .rightControls{
    display:flex;
    align-items:center;
    gap:10px;
  }

  .modelPill{
    display:flex;
    align-items:center;
    gap:10px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    border-radius:16px;
    padding:8px 12px;
    color:rgba(255,255,255,.90);
    font-size:13px;
    white-space:nowrap;
  }
  .openaiMark{
    width:22px;height:22px;
    border-radius:999px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .openaiMark svg{ opacity:.75 }

  .micBtn{
    width:44px;height:44px;
    border-radius:999px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.12);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .micBtn svg{ opacity:.6 }

  .sendCircle{
    width:44px;height:44px;
    border-radius:999px;
    background:#ffffff;
    border:1px solid rgba(0,0,0,.08);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .sendCircle svg{ opacity:.6 }

  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:9999;
  }
  .overlay.open{ display:flex; }
  .modal{
    width:360px;
    background:rgba(17,18,23,.94);
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    padding:16px;
    box-shadow: var(--shadow);
  }
  .modal h3{
    margin:0 0 10px 0;
    font-size:16px;
    font-weight:600;
  }
  .field{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-top:10px;
  }
  .field label{ font-size:12px; color:rgba(255,255,255,.55); }
  .field input{
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.12);
    border-radius:12px;
    padding:10px 10px;
    color:var(--text);
    outline:none;
    font-size:13px;
  }
  .modalActions{
    display:flex;
    gap:8px;
    margin-top:14px;
  }
  .modalActions button{ flex:1; }
  .closeX{
    position:absolute;
    right:18px;
    top:14px;
    opacity:.6;
    cursor:pointer;
    user-select:none;
  }
  .modalWrap{ position:relative; }

  /* BIG PICKER (competitor-like single panel) */
  .nnOverlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.30);
    display:none;
    z-index:9000;
  }
  .nnOverlay.open{ display:block; }

  .nnPanel{
    position:absolute;
    top:82px;
    left:50%;
    transform:translateX(-50%);
    width: min(420px, calc(100vw - 24px));
    max-height: min(620px, calc(100vh - 110px));
    background:rgba(17,18,23,.92);
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    box-shadow: var(--shadow);
    overflow:hidden;
    backdrop-filter: blur(10px);
    display:flex;
    flex-direction:column;
  }

  .nnTop{
    padding:14px;
    border-bottom:1px solid rgba(255,255,255,.08);
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .nnSearchRow{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .nnSearch{
    flex:1;
    display:flex;
    align-items:center;
    gap:8px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);
    border-radius:14px;
    padding:10px 12px;
    min-width:0;
  }
  .nnSearch svg{ opacity:.6; flex:0 0 auto; }
  .nnSearch input{
    width:100%;
    background:transparent;
    border:none;
    outline:none;
    color:rgba(255,255,255,.92);
    font-size:13px;
  }
  .nnSearch input::placeholder{ color:rgba(255,255,255,.45); }

  .pinBtn{
    width:36px;height:36px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .pinBtn:hover{ background:rgba(255,255,255,.08); }
  .pinBtn svg{ opacity:.7; }

  .nnTabs{
    display:flex;
    gap:10px;
  }
  .nnTab{
    flex:1;
    padding:10px 10px;
    border-radius:16px;
    border:1px solid transparent;
    background:transparent;
    color:rgba(255,255,255,.72);
    cursor:pointer;
    font-size:13px;
    font-weight:500;
  }
  .nnTab.active{
    background:rgba(255,255,255,.08);
    border-color:rgba(255,255,255,.10);
    color:rgba(255,255,255,.92);
  }

  .nnBody{
    padding:12px;
    display:flex;
    flex-direction:column;
    gap:12px;
    overflow:auto;
  }

  .nnList{
    display:flex;
    flex-direction:column;
    gap:10px;
  }

  .nnItem{
    width:100%;
    display:flex;
    gap:12px;
    align-items:center;
    padding:12px 12px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,.08);
    background:rgba(255,255,255,.04);
    cursor:pointer;
    text-align:left;
  }
  .nnItem:hover{ background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.10); }
  .nnItem.active{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.12); }

  .nnLogo{
    width:40px;height:40px;
    border-radius:999px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
    flex:0 0 auto;
    overflow:hidden;
  }
  .nnLogo svg{ opacity:.85; }

  .nnMeta{
    display:flex;
    flex-direction:column;
    gap:2px;
    min-width:0;
  }
  .nnTitle{
    font-size:15px;
    font-weight:600;
    color:rgba(255,255,255,.92);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .nnSub{
    font-size:12px;
    color:rgba(255,255,255,.50);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  .nnModels{
    border-top:1px solid rgba(255,255,255,.08);
    padding-top:10px;
  }
  .nnModelsHeader{
    display:flex;
    align-items:baseline;
    justify-content:space-between;
    gap:10px;
    padding:2px 2px 10px 2px;
  }
  .nnModelsTitle{
    font-size:13px;
    font-weight:600;
    color:rgba(255,255,255,.90);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .nnModelsHint{
    font-size:12px;
    color:rgba(255,255,255,.45);
  }

  .modelList{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .mItem{
    width:100%;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding:12px 12px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.08);
    background:rgba(255,255,255,.04);
    cursor:pointer;
    text-align:left;
  }
  .mItem:hover{ background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.10); }
  .mItem.active{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.12); }
  .mLeft{ display:flex; flex-direction:column; gap:2px; min-width:0; }
  .mName{ font-size:13px; font-weight:600; color:rgba(255,255,255,.92); }
  .mDesc{ font-size:12px; color:rgba(255,255,255,.50); }
  .mBadge{
    font-size:11px;
    color:rgba(255,255,255,.55);
    border:1px solid rgba(255,255,255,.10);
    background:rgba(255,255,255,.04);
    padding:6px 10px;
    border-radius:999px;
    white-space:nowrap;
  }

  @media (max-width: 980px){
    main{ grid-template-columns: 1fr; }
    aside{ display:none; }
    .brand{ position:static; left:auto; }
  }
</style>
</head>

<body>

<header>
  <div class="brand"><span class="brandDot"></span>OneAI</div>
  <button class="modelBtn" id="modelBtn" type="button">
    <span>Выбор нейросети</span>
    <span class="chev">▼</span>
  </button>
</header>

<main>
  <aside>
    <div class="sideTitle">
      <span>История чатов</span>
      <span style="opacity:.6">⋯</span>
    </div>
    <button class="newChat" type="button">+ Новый чат</button>

    <div class="chatList">
      <div class="chatItem active">Новый чат</div>
      <div class="chatItem">Чат 1</div>
      <div class="chatItem">Чат 2</div>
    </div>

    <div class="accountBox" id="accountGuest">
      <div class="accountLeft">
        <div class="avatar" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M12 12a4.2 4.2 0 1 0-4.2-4.2A4.2 4.2 0 0 0 12 12Z" stroke="white" stroke-width="1.6" opacity=".8"/>
            <path d="M4.5 20c1.6-4.2 13.4-4.2 15 0" stroke="white" stroke-width="1.6" stroke-linecap="round" opacity=".8"/>
          </svg>
        </div>
        <div class="accountText">
          <div class="accountName">Гость</div>
        </div>
      </div>
      <div class="authBtns">
        <button class="btnWhite" id="btnRegister" type="button">Зарегистрироваться</button>
        <button class="btnGray" id="btnLogin" type="button">Войти</button>
      </div>
    </div>

    <div class="accountBox" id="accountUser" style="display:none;">
      <div class="accountLeft">
        <div class="avatar" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M12 12a4.2 4.2 0 1 0-4.2-4.2A4.2 4.2 0 0 0 12 12Z" stroke="white" stroke-width="1.6" opacity=".8"/>
            <path d="M4.5 20c1.6-4.2 13.4-4.2 15 0" stroke="white" stroke-width="1.6" stroke-linecap="round" opacity=".8"/>
          </svg>
        </div>
        <div class="accountText">
          <div class="accountName" id="userName">Имя</div>
          <div class="accountBalance">Баланс: <span id="userBalance">0</span> ₽</div>
        </div>
      </div>
      <div class="authBtns">
        <button class="btnGray" id="btnLogout" type="button">Выйти</button>
      </div>
    </div>
  </aside>

  <section>
    <div class="hero">
      <h1>Добро пожаловать в OneAI</h1>
      <p>Все нейросети в одном месте</p>
    </div>

    <div class="grid">
      <div class="card"><b>ChatGPT</b><small>Текст</small></div>
      <div class="card"><b>Claude</b><small>Текст</small></div>
      <div class="card"><b>Gemini</b><small>Текст</small></div>
      <div class="card"><b>Perplexity</b><small>Поиск</small></div>
      <div class="card"><b>Suno</b><small>Музыка</small></div>
      <div class="card"><b>Wan 2.6</b><small>Видео</small></div>
    </div>

    <div class="composerWrap">
      <div class="composer">
        <div class="composerInner">
          <div class="composerTop">
            <div class="gridIcon" title="Меню">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M5 5h6v6H5V5Z" stroke="white" stroke-width="1.7" opacity=".8"/>
                <path d="M13 5h6v6h-6V5Z" stroke="white" stroke-width="1.7" opacity=".8"/>
                <path d="M5 13h6v6H5v-6Z" stroke="white" stroke-width="1.7" opacity=".8"/>
                <path d="M13 13h6v6h-6v-6Z" stroke="white" stroke-width="1.7" opacity=".8"/>
              </svg>
            </div>
            <div class="prompt">
              <input id="promptInput" placeholder="Отправить сообщение" />
            </div>
          </div>

          <div class="composerBottom">
            <div class="leftAttach" title="Прикрепить (скоро)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M12 13.5l4.95-4.95a3.5 3.5 0 0 0-4.95-4.95L6.7 8.95a5 5 0 0 0 7.07 7.07l6.01-6.01"
                      stroke="white" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>

            <div class="rightControls">
              <div class="modelPill" title="Выбранная модель">
                <span class="openaiMark" aria-hidden="true">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 3.2c2.3 0 4.3 1.3 5.3 3.3 2 .6 3.4 2.4 3.4 4.6 0 2.7-2.2 4.9-4.9 4.9-.3 0-.6 0-.9-.1-1.1 1.8-3.1 3-5.4 3-2.3 0-4.3-1.3-5.3-3.3-2-.6-3.4-2.4-3.4-4.6 0-2.7 2.2-4.9 4.9-4.9.3 0 .6 0 .9.1C7.7 4.4 9.7 3.2 12 3.2Z"
                          stroke="white" stroke-width="1.6" opacity=".85"/>
                  </svg>
                </span>
                <span id="modelName">ChatGPT • Balanced</span>
              </div>

              <div class="micBtn" title="Микрофон (скоро)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                  <path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3Z"
                        stroke="white" stroke-width="1.7" stroke-linecap="round"/>
                  <path d="M19 11a7 7 0 0 1-14 0"
                        stroke="white" stroke-width="1.7" stroke-linecap="round"/>
                  <path d="M12 18v3" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
                  <path d="M8 21h8" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
                </svg>
              </div>

              <div class="sendCircle" id="sendBtn" title="Отправить (пока не работает)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M7 17L17 7" stroke="#111" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 7h8v8" stroke="#111" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

  </section>
</main>

<!-- BIG PICKER OVERLAY (competitor-like) -->
<div class="nnOverlay" id="nnOverlay" aria-hidden="true">
  <div class="nnPanel" role="dialog" aria-label="Выбор нейросети и модели">
    <div class="nnTop">
      <div class="nnSearchRow">
        <div class="nnSearch">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M21 21l-4.3-4.3" stroke="white" stroke-width="1.7" stroke-linecap="round" opacity=".8"/>
            <path d="M10.8 18.2a7.4 7.4 0 1 1 0-14.8 7.4 7.4 0 0 1 0 14.8Z" stroke="white" stroke-width="1.7" opacity=".8"/>
          </svg>
          <input id="nnSearchInput" placeholder="Быстрый поиск нейросетей" />
        </div>

        <button class="pinBtn" type="button" title="Закрепить (заглушка)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M14 3l7 7-3 1-3 7-2-2-3 3-1-1 3-3-2-2 7-3 1-3Z" stroke="white" stroke-width="1.6" stroke-linejoin="round" opacity=".85"/>
          </svg>
        </button>
      </div>

      <div class="nnTabs" id="nnTabs">
        <button class="nnTab active" data-type="text" type="button">Текст</button>
        <button class="nnTab" data-type="image" type="button">Картинка</button>
        <button class="nnTab" data-type="video" type="button">Видео</button>
        <button class="nnTab" data-type="voice" type="button">Голос</button>
      </div>
    </div>

    <div class="nnBody">
      <div class="nnList" id="nnList"></div>

      <div class="nnModels" id="nnModels">
        <div class="nnModelsHeader">
          <div class="nnModelsTitle" id="nnModelsTitle">ChatGPT</div>
          <div class="nnModelsHint">выбери модель</div>
        </div>
        <div class="modelList" id="modelList"></div>
      </div>
    </div>
  </div>
</div>

<!-- REGISTER MODAL -->
<div class="overlay" id="regOverlay">
  <div class="modalWrap">
    <div class="modal">
      <div class="closeX" data-close="regOverlay">✕</div>
      <h3>Регистрация</h3>

      <div class="field">
        <label>Имя</label>
        <input id="regName" placeholder="Например: Егор">
      </div>

      <div class="field">
        <label>Логин</label>
        <input id="regLogin" placeholder="Логин">
      </div>

      <div class="field">
        <label>Пароль</label>
        <input id="regPass" type="password" placeholder="Пароль">
      </div>

      <div class="modalActions">
        <button class="btnWhite" id="regSubmit" type="button">Создать</button>
        <button class="btnGray" data-close="regOverlay" type="button">Отмена</button>
      </div>
    </div>
  </div>
</div>

<!-- LOGIN MODAL -->
<div class="overlay" id="loginOverlay">
  <div class="modalWrap">
    <div class="modal">
      <div class="closeX" data-close="loginOverlay">✕</div>
      <h3>Вход</h3>

      <div class="field">
        <label>Логин</label>
        <input id="logLogin" placeholder="Логин">
      </div>

      <div class="field">
        <label>Пароль</label>
        <input id="logPass" type="password" placeholder="Пароль">
      </div>

      <div class="modalActions">
        <button class="btnWhite" id="logSubmit" type="button">Войти</button>
        <button class="btnGray" data-close="loginOverlay" type="button">Отмена</button>
      </div>
    </div>
  </div>
</div>

<script>
  // AUTH (demo localStorage)
  const KEY_USERS = "oneai_users";
  const KEY_CURRENT = "oneai_current";

  const accountGuest = document.getElementById('accountGuest');
  const accountUser  = document.getElementById('accountUser');
  const userNameEl = document.getElementById('userName');
  const userBalEl  = document.getElementById('userBalance');

  function getUsers(){ try { return JSON.parse(localStorage.getItem(KEY_USERS)) || []; } catch { return []; } }
  function setUsers(users){ localStorage.setItem(KEY_USERS, JSON.stringify(users)); }
  function getCurrent(){ return localStorage.getItem(KEY_CURRENT); }
  function setCurrent(login){ localStorage.setItem(KEY_CURRENT, login); }
  function clearCurrent(){ localStorage.removeItem(KEY_CURRENT); }

  function renderAccount(){
    const login = getCurrent();
    if(!login){ accountGuest.style.display="flex"; accountUser.style.display="none"; return; }
    const user = getUsers().find(u => u.login === login);
    if(!user){ clearCurrent(); accountGuest.style.display="flex"; accountUser.style.display="none"; return; }
    accountGuest.style.display="none";
    accountUser.style.display="flex";
    userNameEl.textContent = user.name;
    userBalEl.textContent = user.balance ?? 0;
  }

  const regOverlay = document.getElementById('regOverlay');
  const loginOverlay = document.getElementById('loginOverlay');
  function openOverlay(el){ el.classList.add('open'); }
  function closeOverlay(el){ el.classList.remove('open'); }

  document.querySelectorAll('[data-close]').forEach(x=>{
    x.addEventListener('click', ()=> closeOverlay(document.getElementById(x.dataset.close)));
  });
  [regOverlay, loginOverlay].forEach(ov=>{
    ov.addEventListener('click', (e)=>{ if(e.target === ov) closeOverlay(ov); });
  });

  document.getElementById('btnRegister').addEventListener('click', ()=> openOverlay(regOverlay));
  document.getElementById('btnLogin').addEventListener('click', ()=> openOverlay(loginOverlay));
  document.getElementById('btnLogout').addEventListener('click', ()=>{ clearCurrent(); renderAccount(); });

  document.getElementById('regSubmit').addEventListener('click', ()=>{
    const name = document.getElementById('regName').value.trim();
    const login = document.getElementById('regLogin').value.trim();
    const pass = document.getElementById('regPass').value.trim();
    if(!name || !login || !pass) return alert("Заполни всё");
    const users = getUsers();
    if(users.some(u => u.login === login)) return alert("Логин занят");
    users.push({ name, login, pass, balance: 0 });
    setUsers(users);
    setCurrent(login);
    closeOverlay(regOverlay);
    renderAccount();
  });

  document.getElementById('logSubmit').addEventListener('click', ()=>{
    const login = document.getElementById('logLogin').value.trim();
    const pass = document.getElementById('logPass').value.trim();
    if(!login || !pass) return alert("Заполни всё");
    const user = getUsers().find(u => u.login === login && u.pass === pass);
    if(!user) return alert("Неверный логин или пароль");
    setCurrent(login);
    closeOverlay(loginOverlay);
    renderAccount();
  });

  renderAccount();

  // SEND (visual only)
  document.getElementById('sendBtn').addEventListener('click', ()=>{
    alert("Пока без бэка. Следующий шаг — подключение модели.");
  });

  // PICKER DATA (без иконок, заглушки svg)
  const PROVIDERS = [
    { id:"chatgpt", name:"ChatGPT", org:"OpenAI", type:"text" },
    { id:"claude", name:"Claude", org:"Anthropic", type:"text" },
    { id:"gemini", name:"Gemini", org:"Google DeepMind", type:"text" },
    { id:"perplexity", name:"Perplexity", org:"Perplexity AI", type:"text" },
    { id:"qwen", name:"Qwen", org:"Alibaba", type:"text" },

    { id:"midjourney", name:"Midjourney", org:"", type:"image" },
    { id:"sd", name:"Stable Diffusion", org:"", type:"image" },

    { id:"runway", name:"Runway", org:"", type:"video" },
    { id:"wan", name:"Wan 2.6", org:"", type:"video" },

    { id:"whisper", name:"Whisper", org:"OpenAI", type:"voice" },
    { id:"eleven", name:"ElevenLabs", org:"", type:"voice" },
  ];

  const MODELS = {
    chatgpt: [
      { id:"balanced", title:"Balanced", desc:"универсально, норм скорость", badge:"по умолчанию" },
      { id:"fast", title:"Fast", desc:"быстро, проще ответы", badge:"дёшево" },
      { id:"pro", title:"Pro", desc:"умнее, медленнее", badge:"лучше" },
    ],
    claude: [
      { id:"sonnet", title:"Sonnet", desc:"универсально", badge:"по умолчанию" },
      { id:"haiku", title:"Haiku", desc:"быстро", badge:"скорость" },
      { id:"opus", title:"Opus", desc:"качество", badge:"лучше" },
    ],
    gemini: [
      { id:"balanced", title:"Balanced", desc:"универсально", badge:"по умолчанию" },
      { id:"pro", title:"Pro", desc:"качество", badge:"лучше" },
    ],
    perplexity: [
      { id:"search", title:"Search", desc:"поиск и ответы", badge:"поиск" },
      { id:"balanced", title:"Balanced", desc:"универсально", badge:"по умолчанию" },
    ],
    qwen: [
      { id:"balanced", title:"Balanced", desc:"универсально", badge:"по умолчанию" },
      { id:"fast", title:"Fast", desc:"быстро", badge:"скорость" },
    ],
    midjourney: [{ id:"v1", title:"v1", desc:"генерация изображений", badge:"скоро" }],
    sd: [{ id:"xl", title:"XL", desc:"генерация изображений", badge:"скоро" }],
    runway: [{ id:"v1", title:"v1", desc:"видео", badge:"скоро" }],
    wan: [{ id:"v1", title:"v1", desc:"видео", badge:"скоро" }],
    whisper: [{ id:"base", title:"Base", desc:"распознавание речи", badge:"скоро" }],
    eleven: [{ id:"v1", title:"v1", desc:"синтез голоса", badge:"скоро" }],
  };

  function logoSvg(providerId){
    const common = `stroke="white" stroke-width="1.6" opacity=".85"`;
    if(providerId === "claude") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 3l7 18H5L12 3Z" ${common}/></svg>`;
    if(providerId === "gemini") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 3l3.2 6.6L22 12l-6.8 2.4L12 21l-3.2-6.6L2 12l6.8-2.4L12 3Z" ${common}/></svg>`;
    if(providerId === "perplexity") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M7 7h10v10H7V7Z" ${common}/><path d="M12 7v10" ${common}/><path d="M7 12h10" ${common}/></svg>`;
    if(providerId === "qwen") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 4a8 8 0 1 0 8 8" ${common}/><path d="M20 12l-3 0" ${common}/></svg>`;
    if(providerId === "midjourney") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M7 17c2-6 8-6 10 0" ${common}/><path d="M9 10h.01" ${common}/><path d="M15 10h.01" ${common}/></svg>`;
    if(providerId === "sd") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 4v16" ${common}/><path d="M4 12h16" ${common}/></svg>`;
    if(providerId === "runway" || providerId === "wan") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M8 7h8v10H8V7Z" ${common}/><path d="M16 12l4-2v4l-4-2Z" ${common}/></svg>`;
    if(providerId === "whisper" || providerId === "eleven") return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3Z" ${common}/><path d="M19 11a7 7 0 0 1-14 0" ${common}/></svg>`;
    return `<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 3.2c2.3 0 4.3 1.3 5.3 3.3 2 .6 3.4 2.4 3.4 4.6 0 2.7-2.2 4.9-4.9 4.9-.3 0-.6 0-.9-.1-1.1 1.8-3.1 3-5.4 3-2.3 0-4.3-1.3-5.3-3.3-2-.6-3.4-2.4-3.4-4.6 0-2.7 2.2-4.9 4.9-4.9.3 0 .6 0 .9.1C7.7 4.4 9.7 3.2 12 3.2Z" ${common}/></svg>`;
  }

  // PICKER LOGIC
  const modelNameEl = document.getElementById("modelName");
  const nnOverlay = document.getElementById("nnOverlay");
  const nnList = document.getElementById("nnList");
  const modelList = document.getElementById("modelList");
  const nnModelsTitle = document.getElementById("nnModelsTitle");
  const nnSearchInput = document.getElementById("nnSearchInput");
  const nnTabs = document.getElementById("nnTabs");

  let activeType = "text";
  let activeProviderId = "chatgpt";
  let activeModelId = (MODELS[activeProviderId]?.[0]?.id) || "balanced";

  function openPicker(){
    nnOverlay.classList.add("open");
    nnOverlay.setAttribute("aria-hidden", "false");
    nnSearchInput.value = "";
    ensureActiveProvider(true);
    renderProviders();
    renderModels();
    setTimeout(()=> nnSearchInput.focus(), 30);
  }
  function closePicker(){
    nnOverlay.classList.remove("open");
    nnOverlay.setAttribute("aria-hidden", "true");
  }

  document.getElementById("modelBtn").addEventListener("click", (e)=>{
    e.stopPropagation();
    nnOverlay.classList.contains("open") ? closePicker() : openPicker();
  });

  nnOverlay.addEventListener("click", (e)=>{
    if(e.target === nnOverlay) closePicker();
  });

  document.addEventListener("keydown", (e)=>{
    if(e.key === "Escape") closePicker();
  });

  nnTabs.addEventListener("click", (e)=>{
    const tab = e.target.closest(".nnTab");
    if(!tab) return;
    nnTabs.querySelectorAll(".nnTab").forEach(t=> t.classList.remove("active"));
    tab.classList.add("active");
    activeType = tab.dataset.type;
    ensureActiveProvider(true);
    renderProviders();
    renderModels();
  });

  nnSearchInput.addEventListener("input", ()=>{
    ensureActiveProvider(false);
    renderProviders();
    renderModels();
  });

  function filteredProviders(){
    const q = nnSearchInput.value.trim().toLowerCase();
    return PROVIDERS
      .filter(p => p.type === activeType)
      .filter(p => !q || (p.name.toLowerCase().includes(q) || (p.org||"").toLowerCase().includes(q)));
  }

  function ensureActiveProvider(forceFirst){
    const items = filteredProviders();
    if(!items.length) return;
    if(forceFirst || !items.some(x=> x.id === activeProviderId)){
      activeProviderId = items[0].id;
      activeModelId = (MODELS[activeProviderId]?.[0]?.id) || "balanced";
    }
  }

  function renderProviders(){
    const items = filteredProviders();
    nnList.innerHTML = items.map(p => {
      const active = p.id === activeProviderId ? "active" : "";
      return `
        <button class="nnItem ${active}" type="button" data-id="${p.id}">
          <div class="nnLogo">${logoSvg(p.id)}</div>
          <div class="nnMeta">
            <div class="nnTitle">${p.name}</div>
            <div class="nnSub">${p.org || ""}</div>
          </div>
        </button>
      `;
    }).join("");

    nnList.querySelectorAll(".nnItem").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        activeProviderId = btn.dataset.id;
        activeModelId = (MODELS[activeProviderId]?.[0]?.id) || "balanced";
        renderProviders();
        renderModels();
      });
    });
  }

  function renderModels(){
    const provider = PROVIDERS.find(p => p.id === activeProviderId);
    nnModelsTitle.textContent = provider ? provider.name : "Модели";
    const ms = MODELS[activeProviderId] || [];
    modelList.innerHTML = ms.map(m=>{
      const active = m.id === activeModelId ? "active" : "";
      return `
        <button class="mItem ${active}" type="button" data-mid="${m.id}">
          <div class="mLeft">
            <div class="mName">${m.title}</div>
            <div class="mDesc">${m.desc || ""}</div>
          </div>
          <div class="mBadge">${m.badge || ""}</div>
        </button>
      `;
    }).join("");

    modelList.querySelectorAll(".mItem").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        activeModelId = btn.dataset.mid;
        const pName = provider?.name || "Модель";
        const mTitle = (MODELS[activeProviderId] || []).find(x=> x.id === activeModelId)?.title || "Balanced";
        modelNameEl.textContent = `${pName} • ${mTitle}`;
        closePicker();
      });
    });
  }
</script>

</body>
</html>
